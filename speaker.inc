; Audio bits
; Degrees Celcius. 1. 2. 3. 4. 5. 6. 7. 8. 9. 10. 11. 12. 13. 14. 15. 16. 17. 18. 19. 
; 20. 30. 40. 50. 60. 70. 80. 90. 100. 200. 300. Ramp to soak. Preheat/Soak. Ramp to peak. 
; Reflow. Cooling. Start. Stop. Warning, critical temperature!. Didn't reach the temperature in 60 seconds. Process aborted.
; LisaV3 (https://text-to-speech-demo.ng.bluemix.net/)

; Command prompt
; Index file: computer_sender -Asw_index.asm -S2000 big_file.wav
; Program Audio: computer_sender â€“COM4 -W -V big_file.wav
cseg
; Approximate index of sounds in file 'big_file.wav'
sound_index:
    db 0x00, 0x00, 0x2b ; 0 
    db 0x00, 0x7c, 0x78 ; 1 
    db 0x00, 0xc1, 0x7b ; 2 
    db 0x01, 0x05, 0xa2 ; 3 
    db 0x01, 0x47, 0x18 ; 4 
    db 0x01, 0x8d, 0x45 ; 5 
    db 0x01, 0xd1, 0x5f ; 6 
    db 0x02, 0x1d, 0x26 ; 7 
    db 0x02, 0x6b, 0x8f ; 8 
    db 0x02, 0xac, 0xeb ; 9 
    db 0x02, 0xf6, 0x5d ; 10 
    db 0x03, 0x38, 0x9d ; 11 
    db 0x03, 0x89, 0x76 ; 12 
    db 0x03, 0xce, 0xe7 ; 13 
    db 0x04, 0x26, 0xcf ; 14 
    db 0x04, 0x81, 0xab ; 15 
    db 0x04, 0xdb, 0xb8 ; 16 
    db 0x05, 0x3c, 0x0a ; 17 
    db 0x05, 0xa1, 0x0c ; 18 
    db 0x05, 0xf5, 0xc6 ; 19 
    db 0x06, 0x53, 0x97 ; 20 
    db 0x06, 0x9e, 0x60 ; 21 
    db 0x06, 0xe3, 0x0b ; 22 
    db 0x07, 0x2b, 0xda ; 23 
    db 0x07, 0x7a, 0x79 ; 24 
    db 0x07, 0xd0, 0xbf ; 25 
    db 0x08, 0x26, 0xab ; 26 
    db 0x08, 0x6a, 0xd4 ; 27 
    db 0x08, 0xbe, 0x99 ; 28 
    db 0x09, 0x25, 0xd3 ; 29 
    db 0x09, 0x82, 0x22 ; 30 
    db 0x09, 0xe1, 0x2a ; 31 
    db 0x0a, 0x4c, 0x5b ; 32 
    db 0x0a, 0xb5, 0x48 ; 33 
    db 0x0b, 0x1c, 0x8b ; 34 
    db 0x0b, 0x70, 0x2a ; 35 
    db 0x0b, 0xbb, 0x9a ; 36 
    db 0x0c, 0x0b, 0xd7 ; 37 
    db 0x0c, 0x5a, 0x4b ; 38 
    db 0x0c, 0xa7, 0x4a ; 39 
    db 0x0d, 0x11, 0xfd ; 40 
    db 0x0d, 0xf6, 0x28 ; 41 
    db 0x0e, 0xf2, 0x34 ; 42 
    db 0x0f, 0xcd, 0x31 ; 43 
    db 0x10, 0x32, 0x51 ; 44 
    db 0x10, 0x9e, 0x41 ; 45 
    db 0x11, 0x05, 0xa6 ; 46 
    db 0x11, 0x6b, 0xfb ; 47 
    db 0x11, 0xd0, 0x03 ; 48 
    db 0x12, 0x1c, 0x5a ; 49 
    db 0x12, 0x65, 0xdb ; 50 
    db 0x12, 0xcc, 0x16 ; 51 
    db 0x13, 0x1d, 0x16 ; 52 
    db 0x13, 0x38, 0xcf ; 53 
    db 0x13, 0xaa, 0xab ; 54 
    db 0x14, 0x10, 0xc7 ; 55 
    db 0x14, 0x6c, 0x53 ; 56 
    db 0x14, 0xdb, 0x11 ; 57 
    db 0x15, 0x0e, 0x69 ; 58 
    db 0x15, 0x4c, 0xa9 ; 59 
    db 0x15, 0x7b, 0xff ; 60 
    db 0x15, 0xb4, 0xcf ; 61 
    db 0x15, 0xe9, 0x69 ; 62 
    db 0x16, 0x24, 0x5e ; 63 
    db 0x16, 0x69, 0x12 ; 64 
    db 0x16, 0x95, 0xbd ; 65 
    db 0x17, 0x05, 0xdd ; 66 
    db 0x17, 0x45, 0x3a ; 67 
    db 0x17, 0x76, 0x6f ; 68 
    db 0x17, 0xb9, 0x44 ; 69 
    db 0x17, 0xe6, 0x8f ; 70 
    db 0x18, 0x40, 0x11 ; 71 
    db 0x18, 0xda, 0x30 ; 72 
    db 0x19, 0x17, 0xf7 ; 73 
    db 0x19, 0x37, 0xaa ; 74 
    db 0x19, 0x98, 0x6f ; 75 
    db 0x19, 0xd9, 0x88 ; 76 
    db 0x19, 0xfe, 0xd7 ; 77 
    db 0x1a, 0x32, 0xfe ; 78 
    db 0x1a, 0x5f, 0xbb ; 79 
    db 0x1a, 0xdc, 0x8d ; 80 
    db 0x1b, 0x41, 0xee ; 81 
    db 0x1b, 0xa0, 0x95 ; 82 
    db 0x1c, 0x06, 0x6f ; 83 
    db 0x1c, 0x7d, 0xf1 ; 84 
    db 0x1c, 0xf5, 0xf0 ; 85 
    db 0x1d, 0x0a, 0x20 ; 86 
    db 0x1d, 0x6e, 0xb6 ; 87 
    db 0x1d, 0xf9, 0x0c ; 88 
    db 0x1e, 0x3f, 0x90 ; 89 
    db 0x1e, 0x77, 0xaa ; 90 
    db 0x1e, 0x8e, 0x02 ; 91 
    db 0x1e, 0xdb, 0xbb ; 92 
    db 0x1e, 0xe9, 0x3d ; 93 
    db 0x1e, 0xfe, 0xad ; 94 
    db 0x1f, 0x18, 0xad ; 95 
    db 0x1f, 0x2d, 0x48 ; 96 
    db 0x1f, 0xae, 0x40 ; 97 
    db 0x1f, 0xdf, 0xa6 ; 98 
    db 0x1f, 0xf8, 0xcc ; 99 
    db 0x20, 0x15, 0xd5 ; 100 
    db 0x20, 0x24, 0xc2 ; 101 
    db 0x20, 0x9e, 0x83 ; 102 
    db 0x20, 0xfc, 0x21 ; 103 
    db 0x21, 0x90, 0x9b ; 104 
    db 0x21, 0x9d, 0xd6 ; 105 
    db 0x21, 0xf0, 0x0d ; 106 
    db 0x22, 0x00, 0x51 ; 107 
    db 0x22, 0xc7, 0x16 ; 108 
    db 0x24, 0x4f, 0x0e ; 109 
    db 0x24, 0xc7, 0x67 ; 110 
    db 0x25, 0x83, 0xb8 ; 111 
    db 0x25, 0xd0, 0x56 ; 112 
    db 0x26, 0x35, 0x3f ; 113 
    db 0x26, 0x88, 0x7c ; 114 
    db 0x26, 0xd7, 0xa7 ; 115 
    db 0x27, 0x28, 0x01 ; 116 
    db 0x27, 0x7b, 0x9f ; 117 
    db 0x27, 0xd0, 0x40 ; 118 
    db 0x28, 0x0d, 0x8c ; 119 
    db 0x28, 0x56, 0x5a ; 120 
    db 0x28, 0x8a, 0xec ; 121 
    db 0x28, 0xd4, 0x5f ; 122 
    db 0x29, 0x16, 0x2f ; 123 
    db 0x29, 0x69, 0x86 ; 124 
    db 0x29, 0xc3, 0x87 ; 125 
    db 0x2a, 0x19, 0xa1 ; 126 
    db 0x2a, 0x6b, 0x2c ; 127 
    db 0x2a, 0xc0, 0xd7 ; 128 
    db 0x2b, 0x1a, 0x6b ; 129 
    db 0x2b, 0x70, 0xa4 ; 130 
    db 0x2b, 0xb3, 0x44 ; 131 
    db 0x2b, 0xf2, 0xd8 ; 132 
    db 0x2c, 0x39, 0xda ; 133 
    db 0x2c, 0x7c, 0xdd ; 134 
    db 0x2c, 0xcb, 0x65 ; 135 
    db 0x2d, 0x17, 0xd7 ; 136 
    db 0x2d, 0x5e, 0xff ; 137 
    db 0x2d, 0xaa, 0x68 ; 138 
    db 0x2d, 0xf9, 0x2f ; 139 
    db 0x2e, 0x4e, 0x0e ; 140 
    db 0x2e, 0xa3, 0x31 ; 141 
    db 0x2f, 0x2a, 0x14 ; 142 
    db 0x2f, 0x95, 0x3b ; 143 
    db 0x2f, 0xdb, 0x3c ; 144 
    db 0x30, 0x7c, 0x42 ; 145 
    db 0x30, 0xda, 0x9b ; 146 
    db 0x31, 0x26, 0xc9 ; 147 
    db 0x31, 0xa3, 0xf2 ; 148 
    db 0x32, 0x7b, 0xcc ; 149 
    db 0x33, 0x9c, 0xd9 ; 150 
    db 0x34, 0x51, 0x1f ; 151 
    db 0x34, 0xb2, 0x7b ; 152 
    db 0x35, 0x24, 0x8d ; 153 
    db 0x35, 0x7e, 0x0d ; 154 
    db 0x36, 0x09, 0x4a ; 155 
    db 0x36, 0x82, 0xf6 ; 156 
    db 0x36, 0xb9, 0xf7 ; 157 
    db 0x37, 0x09, 0xfa ; 158 
    db 0x37, 0x34, 0x26 

; Size of each sound in 'sound_index'
Size_sound:
    db 0x00, 0x7c, 0x4d ; 0 
    db 0x00, 0x45, 0x03 ; 1 
    db 0x00, 0x44, 0x27 ; 2 
    db 0x00, 0x41, 0x76 ; 3 
    db 0x00, 0x46, 0x2d ; 4 
    db 0x00, 0x44, 0x1a ; 5 
    db 0x00, 0x4b, 0xc7 ; 6 
    db 0x00, 0x4e, 0x69 ; 7 
    db 0x00, 0x41, 0x5c ; 8 
    db 0x00, 0x49, 0x72 ; 9 
    db 0x00, 0x42, 0x40 ; 10 
    db 0x00, 0x50, 0xd9 ; 11 
    db 0x00, 0x45, 0x71 ; 12 
    db 0x00, 0x57, 0xe8 ; 13 
    db 0x00, 0x5a, 0xdc ; 14 
    db 0x00, 0x5a, 0x0d ; 15 
    db 0x00, 0x60, 0x52 ; 16 
    db 0x00, 0x65, 0x02 ; 17 
    db 0x00, 0x54, 0xba ; 18 
    db 0x00, 0x5d, 0xd1 ; 19 
    db 0x00, 0x4a, 0xc9 ; 20 
    db 0x00, 0x44, 0xab ; 21 
    db 0x00, 0x48, 0xcf ; 22 
    db 0x00, 0x4e, 0x9f ; 23 
    db 0x00, 0x56, 0x46 ; 24 
    db 0x00, 0x55, 0xec ; 25 
    db 0x00, 0x44, 0x29 ; 26 
    db 0x00, 0x53, 0xc5 ; 27 
    db 0x00, 0x67, 0x3a ; 28 
    db 0x00, 0x5c, 0x4f ; 29 
    db 0x00, 0x5f, 0x08 ; 30 
    db 0x00, 0x6b, 0x31 ; 31 
    db 0x00, 0x68, 0xed ; 32 
    db 0x00, 0x67, 0x43 ; 33 
    db 0x00, 0x53, 0x9f ; 34 
    db 0x00, 0x4b, 0x70 ; 35 
    db 0x00, 0x50, 0x3d ; 36 
    db 0x00, 0x4e, 0x74 ; 37 
    db 0x00, 0x4c, 0xff ; 38 
    db 0x00, 0x6a, 0xb3 ; 39 
    db 0x00, 0xe4, 0x2b ; 40 
    db 0x00, 0xfc, 0x0c ; 41 
    db 0x00, 0xda, 0xfd ; 42 
    db 0x00, 0x65, 0x20 ; 43 
    db 0x00, 0x6b, 0xf0 ; 44 
    db 0x00, 0x67, 0x65 ; 45 
    db 0x00, 0x66, 0x55 ; 46 
    db 0x00, 0x64, 0x08 ; 47 
    db 0x00, 0x4c, 0x57 ; 48 
    db 0x00, 0x49, 0x81 ; 49 
    db 0x00, 0x66, 0x3b ; 50 
    db 0x00, 0x51, 0x00 ; 51 
    db 0x00, 0x1b, 0xb9 ; 52 
    db 0x00, 0x71, 0xdc ; 53 
    db 0x00, 0x66, 0x1c ; 54 
    db 0x00, 0x5b, 0x8c ; 55 
    db 0x00, 0x6e, 0xbe ; 56 
    db 0x00, 0x33, 0x58 ; 57 
    db 0x00, 0x3e, 0x40 ; 58 
    db 0x00, 0x2f, 0x56 ; 59 
    db 0x00, 0x38, 0xd0 ; 60 
    db 0x00, 0x34, 0x9a ; 61 
    db 0x00, 0x3a, 0xf5 ; 62 
    db 0x00, 0x44, 0xb4 ; 63 
    db 0x00, 0x2c, 0xab ; 64 
    db 0x00, 0x70, 0x20 ; 65 
    db 0x00, 0x3f, 0x5d ; 66 
    db 0x00, 0x31, 0x35 ; 67 
    db 0x00, 0x42, 0xd5 ; 68 
    db 0x00, 0x2d, 0x4b ; 69 
    db 0x00, 0x59, 0x82 ; 70 
    db 0x00, 0x9a, 0x1f ; 71 
    db 0x00, 0x3d, 0xc7 ; 72 
    db 0x00, 0x1f, 0xb3 ; 73 
    db 0x00, 0x60, 0xc5 ; 74 
    db 0x00, 0x41, 0x19 ; 75 
    db 0x00, 0x25, 0x4f ; 76 
    db 0x00, 0x34, 0x27 ; 77 
    db 0x00, 0x2c, 0xbd ; 78 
    db 0x00, 0x7c, 0xd2 ; 79 
    db 0x00, 0x65, 0x61 ; 80 
    db 0x00, 0x5e, 0xa7 ; 81 
    db 0x00, 0x65, 0xda ; 82 
    db 0x00, 0x77, 0x82 ; 83 
    db 0x00, 0x77, 0xff ; 84 
    db 0x00, 0x14, 0x30 ; 85 
    db 0x00, 0x64, 0x96 ; 86 
    db 0x00, 0x8a, 0x56 ; 87 
    db 0x00, 0x46, 0x84 ; 88 
    db 0x00, 0x38, 0x1a ; 89 
    db 0x00, 0x16, 0x58 ; 90 
    db 0x00, 0x4d, 0xb9 ; 91 
    db 0x00, 0x0d, 0x82 ; 92 
    db 0x00, 0x15, 0x70 ; 93 
    db 0x00, 0x1a, 0x00 ; 94 
    db 0x00, 0x14, 0x9b ; 95 
    db 0x00, 0x80, 0xf8 ; 96 
    db 0x00, 0x31, 0x66 ; 97 
    db 0x00, 0x19, 0x26 ; 98 
    db 0x00, 0x1d, 0x09 ; 99 
    db 0x00, 0x0e, 0xed ; 100 
    db 0x00, 0x79, 0xc1 ; 101 
    db 0x00, 0x5d, 0x9e ; 102 
    db 0x00, 0x94, 0x7a ; 103 
    db 0x00, 0x0d, 0x3b ; 104 
    db 0x00, 0x52, 0x37 ; 105 
    db 0x00, 0x10, 0x44 ; 106 
    db 0x00, 0xc6, 0xc5 ; 107 
    db 0x01, 0x87, 0xf8 ; 108 
    db 0x00, 0x78, 0x59 ; 109 
    db 0x00, 0xbc, 0x51 ; 110 
    db 0x00, 0x4c, 0x9e ; 111 
    db 0x00, 0x64, 0xe9 ; 112 
    db 0x00, 0x53, 0x3d ; 113 
    db 0x00, 0x4f, 0x2b ; 114 
    db 0x00, 0x50, 0x5a ; 115 
    db 0x00, 0x53, 0x9e ; 116 
    db 0x00, 0x54, 0xa1 ; 117 
    db 0x00, 0x3d, 0x4c ; 118 
    db 0x00, 0x48, 0xce ; 119 
    db 0x00, 0x34, 0x92 ; 120 
    db 0x00, 0x49, 0x73 ; 121 
    db 0x00, 0x41, 0xd0 ; 122 
    db 0x00, 0x53, 0x57 ; 123 
    db 0x00, 0x5a, 0x01 ; 124 
    db 0x00, 0x56, 0x1a ; 125 
    db 0x00, 0x51, 0x8b ; 126 
    db 0x00, 0x55, 0xab ; 127 
    db 0x00, 0x59, 0x94 ; 128 
    db 0x00, 0x56, 0x39 ; 129 
    db 0x00, 0x42, 0xa0 ; 130 
    db 0x00, 0x3f, 0x94 ; 131 
    db 0x00, 0x47, 0x02 ; 132 
    db 0x00, 0x43, 0x03 ; 133 
    db 0x00, 0x4e, 0x88 ; 134 
    db 0x00, 0x4c, 0x72 ; 135 
    db 0x00, 0x47, 0x28 ; 136 
    db 0x00, 0x4b, 0x69 ; 137 
    db 0x00, 0x4e, 0xc7 ; 138 
    db 0x00, 0x54, 0xdf ; 139 
    db 0x00, 0x55, 0x23 ; 140 
    db 0x00, 0x86, 0xe3 ; 141 
    db 0x00, 0x6b, 0x27 ; 142 
    db 0x00, 0x46, 0x01 ; 143 
    db 0x00, 0xa1, 0x06 ; 144 
    db 0x00, 0x5e, 0x59 ; 145 
    db 0x00, 0x4c, 0x2e ; 146 
    db 0x00, 0x7d, 0x29 ; 147 
    db 0x00, 0xd7, 0xda ; 148 
    db 0x01, 0x21, 0x0d ; 149 
    db 0x00, 0xb4, 0x46 ; 150 
    db 0x00, 0x61, 0x5c ; 151 
    db 0x00, 0x72, 0x12 ; 152 
    db 0x00, 0x59, 0x80 ; 153 
    db 0x00, 0x8b, 0x3d ; 154 
    db 0x00, 0x79, 0xac ; 155 
    db 0x00, 0x37, 0x01 ; 156 
    db 0x00, 0x50, 0x03 ; 157 
    db 0x00, 0x2a, 0x2c ; 158 

; The sound and its length from the two tables above is passed in the accumulator.
Play_Sound_Using_Index:

	setb SOUND ; Turn speaker on
	clr TMOD20 ; Stop the CCU from playing previous request
	setb FLASH_CE
	
	; There are three bytes per row in our tables, so multiply index by three
	mov b, #3
	mul ab
	mov R0, a ; Make a copy of the index*3
	
	clr FLASH_CE ; Enable SPI Flash
	mov a, #READ_BYTES
	lcall Send_SPI
	; Set the initial position in memory of where to start playing
	mov dptr, #sound_index
	mov a, R0
	movc a, @a+dptr
	lcall Send_SPI
	inc dptr
	mov a, R0
	movc a, @a+dptr
	lcall Send_SPI
	inc dptr
	mov a, R0
	movc a, @a+dptr
	lcall Send_SPI
	; Now set how many bytes to play
	mov dptr, #Size_sound
	mov a, R0
	movc a, @a+dptr
	mov w+2, a
	inc dptr
	mov a, R0
	movc a, @a+dptr
	mov w+1, a
	inc dptr
	mov a, R0
	movc a, @a+dptr
	mov w+0, a
	
	mov a, #0x00 ; Request first byte to send to DAC
	lcall Send_SPI
	
	setb TMOD20 ; Start playback by enabling CCU timer

	ret
